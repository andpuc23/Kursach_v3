<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=1024">

  <title>A Neural Network Playground</title>
  <link rel="stylesheet" href="styles.css" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500|Material+Icons" rel="stylesheet" type="text/css">

  <script src="scripts/networks.js"></script>
  <script type="text/javascript" src="scripts/scripts.js"></script>
  <script type="text/javascript" src="scripts/utilities.js"></script>
</head>
<body>
  <!-- Top Controls -->
  <div id="top-controls">
    <div class="container l--page">
      <div class="timeline-controls">
        <button class="ui-resetButton ui-button"
                id="reset-button" title="Rebuild the network" onclick="sendReset()">
          <i class="material-icons">cached</i>
        </button>
        <button class="ui-playButton"
                id="play-pause-button" title="Run/Pause" onclick="startStop()">
          <i class="material-icons">play_arrow</i>
          <i class="material-icons">pause</i>
        </button>
        <button class="ui-stepButton ui-button"
                id="next-step-button" title="Step" onclick="doStep()">
          <i class="material-icons">skip_next</i>
        </button>
      </div>
      <form id="inputs" action="http://localhost:8080" method="get" target="_self">
        <div class="horizontal_control">
          <label for="NNtype">Network type:</label><br/>
          <select id="NNtype" onchange="changeNnTo(this.options[this.selectedIndex].value)">
            <option value="mlp">MultiLayer Perceptron</option>
            <option value="rbf">Radial-basis Function Network</option>
          </select>
        </div>

        <div class="horizontal_control">
          <label for="myLearningRate">Learning rate:</label><br/>
          <select id="myLearningRate">
            <option value="0.00001">0.00001</option>
            <option value="0.0001">0.0001</option>
            <option value="0.001">0.001</option>
            <option value="0.003">0.003</option>
            <option value="0.01">0.01</option>
            <option value="0.03">0.03</option>
            <option value="0.1">0.1</option>
            <option value="0.3">0.3</option>
            <option value="1">1</option>
            <option value="3">3</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="horizontal_control">
          <label for="myActivations">Activation function:</label><br/>
          <select id="myActivations">
            <option value="relu">RELU</option>
            <option value="tanh">Tanh</option>
            <option value="sigmoid">Sigmoid</option>
            <option value="linear">Linear</option>
          </select>
        </div>

        <div class="horizontal_control">
          <label for="myRegularizations">Regularization:</label><br/>
          <select id="myRegularizations">
            <option value="none">None</option>
            <option value="L1">L1</option>
            <option value="L2">L2</option>
          </select>
        </div>

        <div class="horizontal_control">
          <label for="myRegularizationRate">Regularization rate:</label><br/>
          <select id="myRegularizationRate">
            <option value="0.001">0.001</option>
            <option value="0.003">0.003</option>
            <option value="0.01">0.01</option>
            <option value="0.03">0.03</option>
            <option value="0.1">0.1</option>
            <option value="0.3">0.3</option>
            <option value="1">1</option>
            <option value="3">3</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="horizontal_control">
          <label for="myProblem">Problem:</label><br/>
          <select id="myProblem">
            <option value="classification">Classification</option>
            <option value="regression">Regression</option>
          </select>
        </div>
      </form>
    </div>
  </div>

  <!-- Main Part -->
  <div id="main-part" class="l--page">

    <!--  Data Column-->
    <div id="data-column" class="column data">
      <h4>
        <span>Data</span>
      </h4>
      <div class="ui-dataset">
        <p>Which dataset do you want to use?</p>
        <div class="dataset-list">
          <div class="dataset" title="Circle">
            <canvas id="circle-dataset" class="data-thumbnail" onclick="selectDataset('circle')"></canvas>
          </div>
          <div class="dataset" title="XOR">
            <canvas id="xor-dataset" class="data-thumbnail" onclick="selectDataset('xor')"></canvas>
          </div>
          <div class="dataset" title="Gaussian">
            <canvas id="cluster-dataset" class="data-thumbnail" onclick="selectDataset('cluster')"></canvas>
          </div>
          <div class="dataset" title="Spiral">
            <canvas id="spiral-dataset" class="data-thumbnail" onclick="selectDataset('spiral')"></canvas>
          </div>
        </div>
      </div>
      <div>
        <div class="ui-noise">
          <label for="noise">Noise:&nbsp;&nbsp;<span id="noise-label-value" class="value">15</span>%</label>
          <p class="slider">
            <input class="mdl-slider mdl-js-slider" type="range" id="noise" min="10" max="50" step="5" value="15" onchange="updateValue('noise-label-value', this.value)">
          </p>
        </div>
        <div class="ui-batchSize">
          <label for="batchSize">Batch size:&nbsp;&nbsp;<span id="batchSize-value" class="value">5</span></label>
          <p class="slider">
            <input class="mdl-slider mdl-js-slider" type="range" id="batchSize"  min="1" max="30" step="1" value="5"
                   onchange="updateValue('batchSize-value', this.value)">
          </p>
        </div>
          <button class="basic-button" id="data-regen-button" title="Regenerate data" onclick="reloadDatasets()">
            Regenerate
          </button>
      </div>
    </div>

    <!-- Features Column -->
    <div id="features-column" class="column features">
      <h4>Features</h4>
      <p>Which properties do you want to feed in?</p>
      <div id="network">
        <div class="feature-wrapper">
            <tspan>X</tspan>
            <canvas id="X-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <tspan>Y</tspan>
            <canvas id="Y-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <tspan>X</tspan>
            <tspan baseline-shift="super" style="font-size: 9px">2</tspan>
            <canvas id="X2-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <tspan>Y</tspan>
            <tspan baseline-shift="super" style="font-size: 9px">2</tspan>
            <canvas id="Y2-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <p>XY</p>
            <canvas id="XY-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <p>sin(X)</p>
            <canvas id="sX-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
        <div class="feature-wrapper">
            <p>sin(Y)</p>
            <canvas id="sY-feature" class="feature input-feature" onclick="selectFeature(this.id)"></canvas>
        </div>
      </div>
    </div>

    <!-- Hidden Layers Column -->
    <div id="hidden-layers-column" class="column hidden-layers">
      <h4>
        <div class="ui-numHiddenLayers">
          <button id="add-layers" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="addLayer()">
            <i class="material-icons">add</i>
          </button>
          <button id="remove-layers" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="removeLayer()">
            <i class="material-icons">remove</i>
          </button>
        </div>
        <span id="num-layers">2</span>
        <p>hidden layers</p>
      </h4>
      <div class="bracket"></div>


      <div id="columns" style="border: 1px solid red; min-height: 20px; overflow: hidden">
        <div class="layer-column" id="row-0">
          <div class="neuron-buttons">
            <button id="add-0" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="addNextNeuron('row-0')">
              <i class="material-icons">add</i>
            </button>
            <button id="remove-0" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="removeNeuron('row-0')">
              <i class="material-icons">remove</i>
            </button>
          </div>
          <div class="neuron" id="000"></div>
          <div class="neuron" id="001"></div>
          <div class="neuron" id="002"></div>
          <div class="neuron" id="003"></div>
        </div>
        <div class="layer-column" id="row-1">
          <div class="neuron-buttons">
            <button id="add-1" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="addNextNeuron('row-1')">
              <i class="material-icons">add</i>
            </button>
            <button id="remove-1" class="mdl-button mdl-js-button mdl-button--icon layers-button" onclick="removeNeuron('row-1')">
              <i class="material-icons">remove</i>
            </button>
            <div class="neuron" id="100"></div>
            <div class="neuron" id="101"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Output Column -->
    <div class="column output">
      <h4>Output</h4>
      <div class="metrics">
        <div class="output-stats ui-percTrainData">
          <span>Test loss</span>
          <div class="value" id="loss-test"></div>
        </div>
        <div class="output-stats train">
          <span>Training loss</span>
          <div class="value" id="loss-train"></div>
        </div>
        <div id="linechart"></div>
      </div>
      <div id="heatmap"></div>
      <div style="float:left;margin-top:20px">
        <div style="display:flex; align-items:center;">

          <!-- Gradient color scale -->
          <div class="label" style="width:105px; margin-right: 10px">
            Colors shows data, neuron and weight values.
          </div>
          <svg width="150" height="30" id="colormap">
            <defs>
              <linearGradient id="gradient" x1="0%" y1="100%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#ff0080" stop-opacity="1"></stop>
                <stop offset="50%" stop-color="#e6e6e6" stop-opacity="1"></stop>
                <stop offset="100%" stop-color="#00ff80" stop-opacity="1"></stop>
              </linearGradient>
            </defs>
            <g class="core" transform="translate(3, 0)">
              <rect width="144" height="10" style="fill: url('#gradient');"></rect>
            </g>
          </svg>
        </div>
        <br/>
        <div style="display:flex;">
          <label class="ui-showTestData mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="show-test-data">
            <input type="checkbox" id="show-test-data" class="mdl-checkbox__input" checked>
            <span class="mdl-checkbox__label label">Show test data</span>
          </label>
          <label class="ui-discretize mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="discretize">
            <input type="checkbox" id="discretize" class="mdl-checkbox__input" checked>
            <span class="mdl-checkbox__label label">Discretize output</span>
          </label>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
